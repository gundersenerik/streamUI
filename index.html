<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVP Content Builder</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500;9..40,600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="app">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <div class="logo-icon">SB</div>
                <div class="logo-text">
                    SVP Builder
                    <span>Braze Content Generator</span>
                </div>
            </div>
            
            <nav class="nav-section">
                <div class="nav-label">Content Type</div>
                <div class="nav-item active" data-type="live">
                    <span class="nav-icon">ðŸ“º</span>
                    Live Content
                </div>
                <div class="nav-item" data-type="sports">
                    <span class="nav-icon">âš½</span>
                    Sports Events
                </div>
                <div class="nav-item" data-type="podcasts">
                    <span class="nav-icon">ðŸŽ§</span>
                    Podcasts
                </div>
                <div class="nav-item" data-type="vod">
                    <span class="nav-icon">ðŸŽ¬</span>
                    Video on Demand
                </div>
                <div class="nav-item" data-type="all">
                    <span class="nav-icon">ðŸ“š</span>
                    All Content
                </div>
            </nav>
            
        </aside>

        <!-- Main Content -->
        <main class="main">
            <header class="main-header">
                <div class="main-header-top">
                    <div class="main-header-text">
                        <h1 class="main-title" id="mainTitle">Live Content</h1>
                        <p class="main-subtitle" id="mainSubtitle">Fetch currently live streams and broadcasts</p>
                    </div>
                    <div class="provider-selector-prominent">
                        <div class="provider-selector-label">
                            <span class="provider-required">*</span> Select Provider
                        </div>
                        <select class="provider-select-prominent" id="providerSelect">
                            <option value="">Choose a provider to start...</option>
                        </select>
                        <div class="provider-hint" id="providerHint">Required to generate API calls</div>
                    </div>
                </div>
            </header>
            
            <!-- Smart Discovery -->
            <section class="discovery-section" id="discoverySection">
                <div class="discovery-grid" id="discoveryGrid"></div>
            </section>
            
            <!-- Filters -->
            <section class="filter-section" id="filterSection">
                <div class="filter-header">
                    <h3 class="filter-title">Filters</h3>
                    <span class="filter-reset" id="filterReset">Reset all</span>
                </div>
                <div class="filter-grid" id="filterGrid"></div>
                <div class="quick-actions" id="quickActions"></div>
            </section>
            
            <!-- Podcast Browser -->
            <section class="podcast-browser hidden" id="podcastBrowser">
                <div class="filter-header">
                    <h3 class="filter-title">Browse Podcast Series</h3>
                    <span class="filter-reset" id="clearPodcast">Clear selection</span>
                </div>
                <div class="podcast-grid" id="podcastGrid">
                    <div class="loading">
                        <div class="loading-spinner"></div>
                        Loading podcasts...
                    </div>
                </div>
            </section>

            <!-- Content Preview -->
            <section class="preview-section" id="previewSection">
                <div class="filter-header">
                    <h3 class="filter-title">Content Preview</h3>
                    <button class="preview-refresh-btn" id="refreshPreview">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M23 4v6h-6"></path>
                            <path d="M1 20v-6h6"></path>
                            <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                        </svg>
                        Refresh Preview
                    </button>
                </div>
                <div class="preview-info" id="previewInfo">
                    <span class="preview-count" id="previewCount">0 items</span>
                    <span class="preview-provider" id="previewProvider">No provider selected</span>
                </div>
                <div class="preview-list" id="previewList">
                    <div class="preview-empty">
                        <div class="preview-empty-icon">ðŸ“‹</div>
                        <div class="preview-empty-text">Select a provider and configure filters to preview content</div>
                    </div>
                </div>
            </section>
        </main>
        
        <!-- Output Panel -->
        <aside class="output-panel">
            <div class="output-header">
                <div class="output-title">Variable Name</div>
                <input type="text" class="variable-input" id="variableName" value="content" placeholder="e.g., myContent">
            </div>
            
            <div class="output-tabs">
                <button class="output-tab active" data-tab="connected">Connected Content</button>
                <button class="output-tab" data-tab="liquid">Liquid Templates</button>
            </div>
            
            <div class="output-content">
                <!-- Connected Content Tab -->
                <div class="output-section active" id="connectedTab">
                    <div class="code-container">
                        <div class="code-label">
                            <span class="code-label-text">Braze Code</span>
                            <button class="copy-btn" data-copy="connected">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                </svg>
                                Copy
                            </button>
                        </div>
                        <pre class="code-block" id="connectedOutput">{% connected_content ... :save content %}</pre>
                    </div>
                    
                    <div class="code-container">
                        <div class="code-label">
                            <span class="code-label-text">Readable URL</span>
                            <button class="copy-btn" data-copy="url">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                </svg>
                                Copy
                            </button>
                        </div>
                        <pre class="code-block code-block--small" id="urlOutput">https://svp.vg.no/...</pre>
                    </div>
                </div>
                
                <!-- Liquid Templates Tab -->
                <div class="output-section" id="liquidTab">
                    <div class="template-list" id="templateList"></div>
                    
                    <div class="code-container" style="margin-top: 20px;">
                        <div class="code-label">
                            <span class="code-label-text">Liquid Code</span>
                            <button class="copy-btn" data-copy="liquid">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                </svg>
                                Copy
                            </button>
                        </div>
                        <pre class="code-block" id="liquidOutput">Select a template above...</pre>
                    </div>
                </div>
            </div>
        </aside>
    </div>
    
    <!-- Toast Notification -->
    <div class="toast" id="toast">Copied to clipboard!</div>

    <!-- JavaScript Modules (order matters) -->
    <script src="js/config.js"></script>
    <script src="js/templates.js"></script>
    <script src="js/state.js"></script>
    <script src="js/api.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/generator.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
